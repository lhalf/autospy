---
source: autospy_macro/src/generate.rs
assertion_line: 58
expression: "prettyplease::unparse(&syn::parse_file(&expanded).unwrap())"
---
#[cfg(test)]
#[derive(Clone)]
struct ReadSpy {
    pub read: autospy::SpyFunction<<[u8] as ToOwned>::Owned, std::io::Result<usize>>,
}
#[cfg(test)]
impl Default for ReadSpy {
    fn default() -> Self {
        Self {
            read: autospy::SpyFunction::from("read"),
        }
    }
}
#[cfg(test)]
impl Read for ReadSpy {
    #[track_caller]
    fn read(&mut self, buf: &mut [u8]) -> std::io::Result<usize> {
        self.read.spy(buf.to_owned())
    }
}
